
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>B/Säº¤äº’æ•°æ®æ—¶ï¼Œç”¨æˆ·è‡ªå®šä¹‰å›è°ƒå‡½æ•°çš„ä¸€ç§ç›´è§‚æ–¹æ³•</title>
    
    <meta name="author" content="HackFisher">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>
    <div class="container">
		<header>
			<h1><a href="/">HackFisher</a>  <small>Stay foolish, Stay hungry</small></h1>
		</header>
		<div class="navbar">
		  <div class="container">
		      <ul class="nav">
		        
		        
		        


  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/projects.html">Project</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



		      </ul>
		      <form action="http://google.com/search" method="get" class="nav">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:hackfisher.info">
    <input class="search" type="text" name="q" results="0" placeholder="Search">
  </fieldset>
</form>

<ul class="subscription nav" data-subscription="rss">
  <li><a href="/rss.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li> 
</ul>
		    </div>
		</div>
		  <div class="content">
		    
<div class="page-header">
  <h2>B/Säº¤äº’æ•°æ®æ—¶ï¼Œç”¨æˆ·è‡ªå®šä¹‰å›è°ƒå‡½æ•°çš„ä¸€ç§ç›´è§‚æ–¹æ³• </h2>
</div>

<div class="row">
  <div class="span8">
    åœ¨jsä¸­ç»å¸¸æœ‰å„ç§å„æ ·çš„å›è°ƒå‡½æ•°ï¼Œå¯ä»¥è®©ç”¨æˆ·è‡ªå®šä¹‰å†…å®¹ï¼Œæ¯”å¦‚ï¼š

1 dosomething({
2 callback: function(res) {
3 // content
4 alert('hello world' + res)
5 }
6 })

åœ¨ä¸€ä¸ªæ¡†æ¶ä¸­ï¼Œè¿™äº›callbackçš„å½¢å‚å¾€å¾€æ˜¯æ¡†æ¶å·²ç»å®šä¹‰å¥½çš„ï¼Œè°ƒç”¨ä¹Ÿæ˜¯ç”±æ¡†æ¶è´Ÿè´£ï¼Œ æ¡†æ¶çš„ç”¨æˆ·å”¯ä¸€èƒ½åšçš„å°±æ˜¯æ”¹å˜callbackå‡½æ•°çš„å†…å®¹ã€‚

æœ‰æ—¶ï¼Œcontentçš„æ•°æ®éœ€è¦ç”±æœåŠ¡å™¨ç”Ÿæˆï¼Œæ¯”å¦‚{arg1: 1, arg2, 2}æ˜¯ç”±æœåŠ¡å™¨ç”Ÿæˆçš„ï¼Œç”¨æˆ·å®šä¹‰è¿™ä¸ªcallbackè¡Œä¸ºæ—¶å¹¶ä¸çŸ¥é“è¿™äº›å‚æ•°çš„å€¼ï¼ŒåªçŸ¥é“å‚æ•°çš„åarg1, arg2, ç”¨æˆ·å¸Œæœ›å¯ä»¥ç›´è§‚èˆ’æœçš„å®šä¹‰ï¼Œæ—¢èƒ½å–åˆ°arg1, arg2, åˆèƒ½å–åˆ°res,èƒ½é€‚åº”ä¸åŒçš„callbackï¼Œåƒä¸‹é¢è¿™æ ·ï¼š

1 function(arg1, arg2, res, status) {
2 alert(arg1 + res);// ç”¨æˆ·èƒ½å®šä¹‰çš„å†…å®¹
3 }

å‰é¢å·²ç»è¯´è¿‡ï¼Œcallbackçš„å½¢å‚å®šä¹‰å’Œè°ƒç”¨ç”¨æˆ·éƒ½æ— æ³•ä»‹å…¥ï¼Œé‚£æ€ä¹ˆæ ·æ‰èƒ½åšåˆ°è¿™æ ·å‘¢?æ–¹æ³•æ€»æ˜¯æœ‰çš„ï¼Œä¸‹é¢æ˜¯ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå¤§ä½“çš„æ€è·¯å°±æ˜¯åˆ©ç”¨closureå–åˆ°callbackå®å‚çš„å€¼ï¼ŒåŒæ—¶å°†callbackçš„å®å‚åµŒå…¥ç”¨æˆ·å®šä¹‰çš„å‡½æ•°æ¥ä¿æŒargumentså’Œå½¢å‚å½¢å¼çš„ç»Ÿä¸€ã€‚Callbackçš„å½¢å¼ï¼š

1 function(res, status){${jsImpl}}

è¿™æ˜¯ç”¨æˆ·å®šä¹‰çš„ä»£ç ï¼š

1 function(arg1, arg2, res, status) {
2 // user defined
3 }()

ç”¨ä¸‹é¢è¿™æ®µä»£ç æ›¿æ¢${jsImpl}, å…¶ä¸­arg1, arg2å’Œ[1, 2]æ˜¯æœåŠ¡å™¨ç«¯ç”Ÿæˆçš„ï¼š

1 ;return (
2 function(arg1, arg2) {
3 ${userDefined}
4 }
5 )
6 .createDelegate(this, [1, 2], true)
7 .apply(this, arguments)

æ•´ä¸ªçš„æ›¿æ¢åå°±æ˜¯ï¼š

01 (function(res){
02 ;return
03 (function(arg1, arg2, arg3){//abc, 1, 2
04 alert(arguments[0]);
05 alert(arguments[1]);
06 alert(arguments[2]);
07 alert(res);
08 alert(arg1);
09 alert(arg2);
10 alert(arg3);
11 })
12 .createDelegate(this, [1, 2], 0)
13 .apply(this, arguments)
14 })
15 .apply(window, ["abc"])

æœ‰äººå¯èƒ½ä¼šé—®ï¼Œå¦‚æœåªæ˜¯è¦å–åˆ°callbackå‚æ•°çš„å€¼ä¸ºä»€ä¹ˆä¸ç®€å•ä¸€ç‚¹ï¼š

01 (function(res){
02 //...
03 ;return
04 (function(arg1, arg2, arg3){//abc, 1, 2
05 alert(arguments[0]);
06 alert(arguments[1]);
07 alert(arguments[2]);
08 alert(res);
09 alert(arg1);
10 alert(arg2);
11 alert(arg3);
12 }).call(this, 1, 2);
13 })
14 .apply(window, ["abc"])

ä¸è¿™æ ·çš„åŸå› ï¼Œä¸»è¦æ˜¯å½¢å‚å’Œargumentså½¢å¼ä¸Šå°±ä¸ç»Ÿä¸€äº†ï¼Œä»¥é˜²æœ‰äººç”¨argumentså–å‚æ•°å€¼ï¼Œè°ˆåˆ°arguments, è¿™è¾¹è¿˜è¦æ³¨æ„å¦‚æœæ˜¯å–åŸæ¥callbackçš„ç¬¬iä¸ªå‚æ•°çš„è¯ï¼Œéœ€è¦åŠ ä¸Šå½¢å‚çš„ä¸ªæ•°arguments[2+i]ï¼Œ2ä¸ºç”¨æˆ·è‡ªå®šä¹‰çš„å½¢å‚ä¸ªæ•°ã€‚

PS: createDelegateè¯·çœ‹<a href="http://www.extjs.com/learn/Manual:Utilities:Function_(Chinese)" target="_blank">http://www.extjs.com/learn/Manual:Utilities:Function_(Chinese)</a>

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/blog/2009/05/java-performance-3" title="Javaæ€§èƒ½ä¼˜åŒ–ä¹‹å®æ—¶æ€§[3]">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/blog/2011/01/chrome-date-setdate-problem" title="Chromeæµè§ˆå™¨Date.setDateé‡åˆ°çš„ä¸€ä¸ªé—®é¢˜">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'hackfisher'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
  
  <div class="span4">
    <h4>Published</h4>
    <div class="date"><span>05 January 2011</span></div>

  
    <h4>Tags</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tags.html#å‰ç«¯å¼€å‘-ref">å‰ç«¯å¼€å‘ <span>3</span></a></li>
    
  



    </ul>
    
  </div>
</div>


		  </div>
    </div> <!-- /container -->

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30459154-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



    <!-- JiaThis Button BEGIN -->
<script type="text/javascript">var jiathis_config = {data_track_clickback:true};</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?move=0&amp;uid=1344392196475354" charset="utf-8"></script>
<!-- JiaThis Button END -->
	<a target="_blank" href="http://vps.42qu.com/by/10022683" style="background:url(http://css42.42qu.us/png/42_39.png) #fff no-repeat ; line-height: 0; display: inline-block; height: 39px; padding-left: 48px; color:#000; text-decoration: none;"><span style="clear:both;margin-bottom:32px;"><span style="font-family: Trebuchet MS; line-height: 18px;"><span style="font-weight: bold; color:#d20; font-size: 19px;">VPS.42QU.COM</span><span style="margin-left: 1px; display: block; font-size: 12px; line-height: 14px; font-weight: bolder; margin-top: 4px;">ºÃÖ÷»ú <span style="margin:0 2px">,</span> Âô¸ø´´ÒµµÄÄã</span></span></span></a>
  </body>
</html>

