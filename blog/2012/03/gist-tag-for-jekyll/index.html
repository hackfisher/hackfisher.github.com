
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Gist Tag For Jekyll, å°†Gistå’ŒJekyllé›†æˆèµ·æ¥</title>
    <meta name="description" content="Gist Tag For Jekyll">
    <meta name="author" content="HackFisher">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>
    <div class="container">
		<header>
			<h1><a href="/">HackFisher</a>  <small>Stay foolish, Stay hungry</small></h1>
		</header>
		<div class="navbar">
		  <div class="container">
		      <ul class="nav">
		        
		        
		        


  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/projects.html">Project</a></li>
      	
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



		      </ul>
		      <form action="http://google.com/search" method="get" class="nav">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:hackfisher.info">
    <input class="search" type="text" name="q" results="0" placeholder="Search">
  </fieldset>
</form>

<ul class="subscription nav" data-subscription="rss">
  <li><a href="/rss.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li> 
</ul>
		    </div>
		</div>
		  <div class="content">
		    
<div class="page-header">
  <h2>Gist Tag For Jekyll, å°†Gistå’ŒJekyllé›†æˆèµ·æ¥ </h2>
</div>

<div class="row">
  <div class="span8">
    <p>GitHubæœ‰ä¸€ä¸ªå¾ˆå¥½çš„åŠŸèƒ½<a href="https://gist.github.com/">Gist</a>ï¼Œå¯ä»¥æ”¶é›†å’Œåˆ†äº«ä»£ç ç‰‡æ®µã€‚è‡ªå·±å†™åšå®¢çš„æ—¶å€™ä¹Ÿç»å¸¸ä¼šéœ€è¦åœ¨åšå®¢ä¸­åµŒå…¥ä»£ç ç‰‡æ®µï¼Œäºæ˜¯åœ¨æƒ³æ˜¯å¦å¯ä»¥å°†è¿™ä¸¤ä¸ªç»“åˆèµ·æ¥ã€‚</p>

<p>ç½‘ä¸Šæœåˆ°ä¸€ä¸ª<a href="http://brandontilley.com/2011/01/30/gist-tag-for-jekyll.html">æ•™ç¨‹</a>ï¼ŒæŒ‰ç…§ä»–å†™çš„æ’ä»¶åŸºæœ¬ä¸Šå°±å¯ä»¥ç›´æ¥é‡ç”¨äº†ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°å‡ ä¸ªé—®é¢˜ï¼š</p>

<ul>
<li><p>GitHub Pageså¤„äºå®‰å…¨æ€§çš„è€ƒè™‘<a href="http://stackoverflow.com/questions/8646744/jekyll-plugin-not-working">ä¸æ”¯æŒè‡ªå®šä¹‰æ’ä»¶</a>
ä½†æ˜¯ä½ åˆ«ç€æ€¥ï¼Œè¿˜æœ‰æœ‰åˆ«çš„åŠæ³•çš„ï¼Œå› ä¸ºJekyllç”Ÿæˆçš„é™æ€é¡µé¢ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥é‡‡å–åœ¨æœ¬åœ°ç”¨æ’ä»¶ç”Ÿæˆé™æ€é¡µé¢ï¼Œç„¶åå†ä¸Šä¼ çš„<a href="http://charliepark.org/jekyll-with-plugins/">åŠæ³•</a>ã€‚
æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæˆ‘ä½¿ç”¨çš„æ–¹æ³•æ¥è‡ªäºè¿™ä¸ª<a href="http://arademaker.github.com/blog/2011/12/01/github-pages-jekyll-plugins.html">æ•™ç¨‹</a>ï¼Œå°±æ˜¯å°†å·¥ç¨‹åˆ†ä¸ºä¸¤ä¸ªbranch: sourceå’Œmasterï¼Œå› ä¸ºgitçš„åˆ‡æ¢æ¯”è¾ƒæ–¹ä¾¿ã€‚
å®˜æ–¹è¿è¡Œçš„jekyllå‘½ä»¤å…¶å®æ˜¯:
  $ jekyll --pygments --safe</p></li>
<li><p>æœ¬åœ°è¿è¡Œjekyllçš„æ—¶å€™æ— æ³•ç¼–è¯‘ï¼Œ<a href="https://github.com/mojombo/jekyll/wiki/Plugins">æ’ä»¶</a>ä¸èµ·ä½œç”¨, <a href="https://github.com/mojombo/jekyll/issues/527">issue</a>
æœ€å¼€å§‹çš„åŸå› æ‰¾äº†å¥½ä¹…ï¼Œåæ¥å‘ç°å°†site.safeå±æ€§è®¾ç½®ä¸ºfalseå°±è¡Œäº†ï¼Œå®˜æ–¹çš„wikiç«Ÿç„¶æ²¡æœ‰è¯´æ˜ï¼ŒGitHubä¹Ÿæ˜¯ç”¨å‚æ•° --safeæ¥ç¦ç”¨æ’ä»¶çš„ã€‚
ä½†æ˜¯è¿™è¾¹æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœä½ æ˜¯ä»jekyllbootstrapé¡¹ç›®cloneè¿‡æ¥çš„è¯ï¼Œå°†safeè®¾ç½®ä¸ºfalseä¼š<a href="https://github.com/plusjade/jekyll-bootstrap/issues/53">å¯¼è‡´Google Analyticså¤±æ•ˆ</a>
å¦‚æœæƒ³åŒæ—¶ç”¨æ’ä»¶ï¼Œåˆæƒ³ç”¨Google Analytisçš„è¯å°±å†²çªäº†ï¼Œéœ€è¦æ”¹ä¸€ä¸‹ _includes\JB\analyticsæ–‡ä»¶ï¼Œå°†é‡Œé¢çš„site.safeæ¡ä»¶åˆ¤æ–­å»æ‰ã€‚</p></li>
</ul>


<p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ˜¯æ’ä»¶çš„å†…å®¹ï¼Œä¹Ÿæ˜¯æˆ‘ç”¨è¿™ä¸ªåŠæ³•ï¼ŒGist å’Œ Jekyllé›†æˆçš„æ•ˆæœ:</p>

<script src='https://gist.github.com/2258459.js?file=gist_tag.rb'></script>


<p><noscript><pre><code>require 'cgi'
require 'digest/md5'
require 'net/https'
require 'uri'</p>

<p>module Jekyll
  class GistTag &lt; Liquid::Tag</p>

<pre><code>def initialize(tag_name, text, token)
  super
  @text           = text
  @cache_disabled = false
  @cache_folder   = File.expand_path &amp;quot;../_gist_cache&amp;quot;, File.dirname(__FILE__)
end

def render(context)
  if parts = @text.match(/([\d]*) (.*)/)
    gist, file = parts[1].strip, parts[2].strip
    script_url = script_url_for gist, file
    code       = get_cached_gist(gist, file) || get_gist_from_web(gist, file)
    html_output_for script_url, code
  else
    &amp;quot;&amp;quot;
  end
end

def html_output_for(script_url, code)
  code = CGI.escapeHTML code
  &amp;quot;&amp;lt;script src='#{script_url}'&amp;gt;&amp;lt;/script&amp;gt;&amp;lt;noscript&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code&amp;gt;#{code}&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/noscript&amp;gt;&amp;quot;
end

def script_url_for(gist_id, filename)
  &amp;quot;https://gist.github.com/#{gist_id}.js?file=#{filename}&amp;quot;
end

def get_gist_url_for(gist, file)
  &amp;quot;https://gist.github.com/raw/#{gist}/#{file}&amp;quot;
end

def cache(gist, file, data)
  cache_file = get_cache_file_for gist, file
  File.open(cache_file, &amp;quot;w&amp;quot;) do |io|
    io.write data
  end
end

def get_cached_gist(gist, file)
  return nil if @cache_disabled
  cache_file = get_cache_file_for gist, file
  File.read cache_file if File.exist? cache_file
end

def get_cache_file_for(gist, file)
  bad_chars = /[^a-zA-Z0-9\-_.]/
  gist      = gist.gsub bad_chars, ''
  file      = file.gsub bad_chars, ''
  md5       = Digest::MD5.hexdigest &amp;quot;#{gist}-#{file}&amp;quot;
  File.join @cache_folder, &amp;quot;#{gist}-#{file}-#{md5}.cache&amp;quot;
end

def get_gist_from_web(gist, file)
  gist_url          = get_gist_url_for gist, file
  raw_uri           = URI.parse gist_url
  https             = Net::HTTP.new raw_uri.host, raw_uri.port
  https.use_ssl     = true
  https.verify_mode = OpenSSL::SSL::VERIFY_NONE
  request           = Net::HTTP::Get.new raw_uri.request_uri
  data              = https.request request
  data              = data.body
  cache gist, file, data unless @cache_disabled
  data
end
</code></pre>

<p>  end</p>

<p>  class GistTagNoCache &lt; GistTag</p>

<pre><code>def initialize(tag_name, text, token)
  super
  @cache_disabled = true
end
</code></pre>

<p>  end
end</p>

<p>Liquid::Template.register_tag('gist', Jekyll::GistTag)
Liquid::Template.register_tag('gistnocache', Jekyll::GistTagNoCache)
</code></pre></noscript></p>

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/blog/2012/03/thinking-in-test-automatization" title="æµ‹è¯•æ€è€ƒç³»åˆ—[4]ï¼šæµ‹è¯•è‡ªåŠ¨åŒ–">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/blog/2012/04/thinking-in-test-non-functional-testing" title="æµ‹è¯•æ€è€ƒç³»åˆ—[5]ï¼šéåŠŸèƒ½æ€§æµ‹è¯•">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'hackfisher'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
  
  <div class="span4">
    <h4>Published</h4>
    <div class="date"><span>31 March 2012</span></div>

  
    <h4>Tags</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tags.html#Gist-ref">Gist <span>1</span></a></li>
     
    	<li><a href="/tags.html#Jekyll-ref">Jekyll <span>2</span></a></li>
    
  



    </ul>
    
  </div>
</div>


		  </div>
    </div> <!-- /container -->

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30459154-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



    <!-- JiaThis Button BEGIN -->
<script type="text/javascript">var jiathis_config = {data_track_clickback:true};</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?move=0&amp;uid=1344392196475354" charset="utf-8"></script>
<!-- JiaThis Button END -->
	<a target="_blank" href="http://vps.42qu.com/by/10022683" style="background:url(http://css42.42qu.us/png/42_39.png) #fff no-repeat ; line-height: 0; display: inline-block; height: 39px; padding-left: 48px; color:#000; text-decoration: none;"><span style="clear:both;margin-bottom:32px;"><span style="font-family: Trebuchet MS; line-height: 18px;"><span style="font-weight: bold; color:#d20; font-size: 19px;">VPS.42QU.COM</span><span style="margin-left: 1px; display: block; font-size: 12px; line-height: 14px; font-weight: bolder; margin-top: 4px;">ºÃÖ÷»ú <span style="margin:0 2px">,</span> Âô¸ø´´ÒµµÄÄã</span></span></span></a>
  </body>
</html>

